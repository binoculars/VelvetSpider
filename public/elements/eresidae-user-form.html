<link rel="import" href="/bower_components/polymer/polymer.html">
<link rel="import" href="/bower_components/core-icon/core-icon.html">
<link rel="import" href="/bower_components/paper-button/paper-button.html">
<link rel="import" href="/bower_components/paper-input/paper-input.html">
<link rel="import" href="/elements/eresidae-layout-default.html">

<polymer-element name="eresidae-user-form">
    <template>
        <style>
            h1 {
                text-align: center;
            }

            hr {
                width: 90%;
            }

            .auto-vert-margins {
                margin-top: auto;
                margin-bottom: auto;
            }
        </style>
        <eresidae-layout-default>
            <h1><core-icon icon="input"></core-icon> [[banner]]</h1>
            <template if="{{message.length}}">
                <h3>{{message}}</h3>
            </template>
            <div vertical layout flex>
                <div class="auto-vert-margins" vertical layout>
                    <form id="form" action="{{action}}" method="post">
                        <template repeat="{{fields}}">
                            <div>
                                <paper-input-decorator label="[[label]]" floatingLabel="[[label]]" value="{{value}}">
                                    <input is="core-input" name="[[name]]" value="{{value}}" type="[[type]]">
                                </paper-input-decorator>
                            </div>
                        </template>
                    </form>
                    <div horizontal end-justified layout>
                        <paper-button id="submit" raised class="inverted" on-tap="{{submit}}" on-click="{{submit}}">{{banner}}</paper-button>
                    </div>
                </div>
            </div>
            <hr>
            <div end>
                <p>{{altMsg}} <a href="{{altHref}}">{{altLink}}</a></p>
                <p>Or go <a href="/">home</a>.</p>
            </div>
        </eresidae-layout-default>
    </template>
    <script>
        Polymer({
            publish: {
                banner: '',
                action: '',
                fields: [{
                    name: 'username',
                    label: 'Username',
                    type: 'text',
                    value: ''
                }, {
                    name: 'password',
                    label: 'Password',
                    type: 'password',
                    value: ''
                }],
                message: '',
                altMsg: '',
                altHref: '',
                altLink: ''
            },
            submit: function() {
                this.$.form.submit();
            }
        });
    </script>
</polymer-element>